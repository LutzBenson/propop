<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Uses the differences between a benchmark and the results from a projection
to compute performance measures."><title>Compute evaluation measures — compute_measures • propop</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Inter-0.4.7/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.7/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute evaluation measures — compute_measures"><meta property="og:description" content="Uses the differences between a benchmark and the results from a projection
to compute performance measures."><meta property="og:image" content="https://statistik-aargau.github.io/propop/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body><p>



  pkgdown/extra.scss

  

  </p>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">propop</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-vignettes">Vignettes</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-vignettes">
    <a class="dropdown-item" href="../articles/prepare_data.html">Prepare data</a>
    <a class="dropdown-item" href="../articles/run_projections.html">Run projections</a>
    <a class="dropdown-item" href="../articles/evaluate.html">Evaluate projections</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/statistik-aargau/propop/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Compute evaluation measures</h1>
      <small class="dont-index">Source: <a href="https://github.com/statistik-aargau/propop/blob/HEAD/R/compute_measures.R" class="external-link"><code>R/compute_measures.R</code></a></small>
      <div class="d-none name"><code>compute_measures.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Uses the differences between a benchmark and the results from a projection
to compute performance measures.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">compute_measures</span><span class="op">(</span><span class="va">combined</span>, weight_groups <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>combined</dt>
<dd><p>data frame created with <code><a href="prepare_evaluation.html">propop::prepare_evaluation()</a></code>.</p></dd>


<dt>weight_groups</dt>
<dd><p>character, optional argument indicating one or more
column names to obtain evaluation criteria weighted for specific groups
(e.g., age groups, nationality).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame. The following evaluation criteria can directly be interpreted
and used for descriptive comparisons:</p><ul><li><p><code>error</code> is the forecast error; it quantifies the level of under-projection
(negative values) and over-projection (positive values) relative to the
benchmark <code>n_bench</code>.</p></li>
<li><p><code>perc_e</code> is the percentage error and expresses the under- / over-projection
in percent of the benchmark <code>n_bench</code>.</p></li>
<li><p><code>abs_perc_e</code> is the absolute percentage error; it is the absolute deviation
in percent of the benchmark <code>n_bench</code>, thus only showing the extent of the
error but not the direction.</p></li>
<li><p><code>w_abs_per_e</code> is the weighted absolute percentage error; it weighs each
absolute percentage error according to the population size of the focal group
(e.g., nationality, age group). The weighted version is useful as an
aggregated measure when groups vary strongly in terms of population size.
Only returned when the argument <code>weight_groups</code> contains at least one
grouping variable.</p></li>
</ul><p>The following helper variables are used to compute aggregate measures. They
are only returned when weight groups are provided via the argument
<code>weight_groups</code>.</p><ul><li><p><code>n_tot</code> is the total number of people (i.e., sum of the number of people in
all demographic groups); used to compute the weighted absolute percentage
error.</p></li>
<li><p><code>group_tot</code> is the number of people in the focal group; used to compute the
weighted absolute percentage error.</p></li>
<li><p><code>weight</code> is the share of the (optional) focal group (e.g., municipality type
/ size, nationality, age group) relative to all people; used to compute the
weighted absolute percentage error.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The input is a data frame created with <code><a href="prepare_evaluation.html">propop::prepare_evaluation()</a></code>.
It includes a benchmark (typically the observed population records, i.e.,
the number of people per spatial unit, demographic group, and year) and
the corresponding projected number of people. The input can range from
low resolution (e.g., total number of people per municipality) to
high resolution (e.g., 101 age classes, nationality, sex).</p>
<p>For more details on usage, see
<code><a href="../articles/evaluate.html">vignette("evaluate", package = "propop")</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Baker, J., et al. (2015). Sub-county population estimates using administrative records: A municipal-level case study in New Mexico. In M. N. Hoque &amp; L. B. Potter (Eds.), Emerging techniques in applied demography (pp. 63-79). Springer, <a href="https://doi.org/10.1007/978-94-017-8990-5_6" class="external-link">https://doi.org/10.1007/978-94-017-8990-5_6</a></p>
<p>Wilson, T. (2012). Forecast accuracy and uncertainty of Australian Bureau of Statistics state and territory population projections, International Journal of Population Research, 1, 419824, <a href="https://doi.org/10.1155/2012/419824" class="external-link">https://doi.org/10.1155/2012/419824</a></p>
<p>Wilson, T. (2016). Evaluation of alternative cohort-component models for local area population forecasts, Population Research and Policy Review, 35, 241-261, <a href="https://doi.org/10.1007/s11113-015-9380-y" class="external-link">https://doi.org/10.1007/s11113-015-9380-y</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Get evaluation measures without weights</span></span></span>
<span class="r-in"><span><span class="fu">compute_measures</span><span class="op">(</span><span class="va">combined</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Get evaluation measures weighted for groups</span></span></span>
<span class="r-in"><span><span class="fu">compute_measures</span><span class="op">(</span><span class="va">combined</span>, weight_groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"nat"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Norah Efosa, Adrian Gadient, Tina Cornioley, Jan Wunder, Niklas Haffert, Statistik Aargau.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  
</body></html>

